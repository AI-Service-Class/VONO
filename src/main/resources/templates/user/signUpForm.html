<!DOCTYPE html>
<html>

<head>

<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="">
<meta name="author" content="">

<title>Vono - Voice Note</title>

<!-- Custom fonts for this template-->
<link href="vendor/fontawesome-free/css/all.min.css" rel="stylesheet" type="text/css">
<link href="https://fonts.googleapis.com/css?family=Nunito:200,200i,300,300i,400,400i,600,600i,700,700i,800,800i,900,900i" rel="stylesheet">

<!-- Custom styles for this template-->
<link href="../css/sb-admin-2.min.css" rel="stylesheet">
<link href="../css/signUp.css" rel="stylesheet">

<!-- favicon  -->
<link rel="shortcut icon" size="16x16 32x32 64x64"  href="img/vonoIcon.png" />

<script type="text/javascript">
window.onload = function() {
	//id와pw 적합여부 검사(4~12자리, 영어대소문자, 숫자만 가능)
	let val = /^[a-zA-Z0-9]{4,15}$/		
	
	//생년월일 적합여부 검사
	let birth_val = /([0-9]{2}(0[1-9]{1}|1[0-2]{1})(0[1-9]{1}|[1,2]{1}[0-9]{1}|3[0,1]{1}))/g
	
	//이메일형식 적합여부 검사
	let mail_val = /^[0-9a-zA-Z]([-_\.]?[0-9a-zA-Z])*@[0-9a-zA-Z]([-_\.]?[0-9a-zA-Z])*\.[a-zA-Z]{2,3}$/i
	
	//폰번호 적합여부 검사
	let phone_val = /^01(?:0|1|[6-9])-(?:\d{3}|\d{4})-\d{4}$/
	
	//닉네임 유효성 검사
	let nick_val = /^[a-zA-Z0-9ㄱ-ㅎ|ㅏ-ㅣ|가-힣]{4,15}$/	
	
	//형식검사하는 메서드
	function check( val, target ) {
		if( val.test( target ) ) {
			return true;
		}
	}
	
	//id 중복 검사
	$( "#user_id" ).blur( function() {
		var user_id = $( "#user_id" ).val();
		if( user_id != '' ) {
			if( check( val, user_id ) ) {
				$.ajax({
					url: './usingId_chk.do?user_id='+user_id,
					type: 'GET',
					success: function( data ) {
						
						if( data == "0" ) {
							$( "#usingId_chk" ).text( "사용할 수 있는 ID입니다." );
							$( "#usingId_chk" ).css( "margin-left", "155px" );
							$( "#usingId_chk" ).css( "color", "blue" );
							$( "#submit1" ).attr( "disabled", false );
						} else if( data == "1"  ) {
							$( "#usingId_chk" ).text( "사용중인 ID입니다." );
							$( "#usingId_chk" ).css( "margin-left", "155px" );
							$( "#usingId_chk" ).css( "color", "red" );
							$( "#submit1" ).attr( "disabled", true );
						}
					},
					error: function() {
						console.log( "signupForm의 ajax 에러" )
					}
				})
			} else {
				$( "#usingId_chk" ).text( "ID가 형식에 맞지않습니다." );
				$( "#usingId_chk" ).css( "margin-left", "155px" );
				$( "#usingId_chk" ).css( "color", "red" );
				$( "#user_id" ).val( "" );
				$( "#submit1" ).attr( "disabled", true );
			}	
		} else {
			$( "#usingId_chk" ).text( "" );
		}
	})
	
	//닉네임 중복 검사
	$( "#nick_id" ).blur( function() {
		var user_nick = $( "#nick_id" ).val();
		if( user_nick != '' ) {
			if( check( nick_val, user_nick ) ) {
				$.ajax({
					url: './usingNick_chk.do?user_nick='+user_nick,
					type: 'GET',
					success: function( data ) {
						
						if( data == "0" ) {
							$( "#usingNick_chk" ).text( "사용할 수 있는 닉네임입니다." );
							$( "#usingNick_chk" ).css( "margin-left", "155px" );
							$( "#usingNick_chk" ).css( "color", "blue" );
							$( "#user_nick" ).val( "" );
							$( "#submit1" ).attr( "disabled", false );
							
						} else if( data == "1"  ) {
							$( "#usingNick_chk" ).text( "사용중인 닉네임입니다." );
							$( "#usingNick_chk" ).css( "margin-left", "155px" );
							$( "#usingNick_chk" ).css( "color", "red" );
							$( "#user_nick" ).val( "" );
							$( "#submit1" ).attr( "disabled", true );
						}
					},
					error: function() {
						console.log( "signupForm의 ajax 에러" )
					}
				})
			} else {
				$( "#usingNick_chk" ).text( "닉네임이 형식에 맞지않습니다." );
				$( "#usingNick_chk" ).css( "margin-left", "155px" );
				$( "#usingNick_chk" ).css( "color", "red" );
				$( "#user_nick" ).val( "" );
				$( "#submit1" ).attr( "disabled", true );
			}
			
		} else {
			$( "#usingNick_chk" ).text( "닉네임을 입력해주세요." );
			$( "#usingNick_chk" ).css( "margin-left", "155px" );
			$( "#usingNick_chk" ).css( "color", "red" );
			$( "#user_nick" ).val( "" );
			$( "#submit1" ).attr( "disabled", true );
		}
	})
	//패스워드 유효성 검사
	$( "#user_pwd" ).blur( function() {
		var user_pwd = $( "#user_pwd" ).val();
		
		if( !check( val, user_pwd ) ) {
			$( "#pwd_chk" ).text( "패스워드가 형식에 맞지 않습니다." );
			$( "#pwd_chk" ).css( "margin-left", "155px" );
			$( "#pwd_chk" ).css( "color", "red" );
			$( "#user_pwd" ).val( "" );
			$( "#submit1" ).attr( "disabled", true );
		} else{
			$( "#pwd_chk" ).text( "" );
			//패스워드 똑같이 입력했는지 검사
			$( "#user_cpwd" ).blur( function() {
				var user_pwd = $( "#user_pwd" ).val();
				var user_cpwd = $( "#user_cpwd" ).val();
				
				if( user_pwd != '' && user_cpwd != '' ) {
					if( user_pwd == user_cpwd ) {
						$( "#cpwd_chk" ).text( "비밀번호가 같습니다." );
						$( "#cpwd_chk" ).css( "margin-left", "155px" );
						$( "#cpwd_chk" ).css( "color", "blue" );
						$( "#submit1" ).attr( "disabled", false );
					} else {
						$( "#cpwd_chk" ).text( "비밀번호가 틀립니다." );
						$( "#cpwd_chk" ).css( "margin-left", "155px" );
						$( "#cpwd_chk" ).css( "color", "red" );
						$( "#user_cpwd" ).val( "" );
						$( "#submit1" ).attr( "disabled", true );
					}
				} else {
					$( "#pwd_chk" ).text( "" );
					$( "#submit1" ).attr( "disabled", false );
				}
				
			})
		}
	})
	
	//생년월일 유효성검사
	$( "#user_birth" ).blur( function() {
		var user_birth = $( '#user_birth' ).val();
		
		if( user_birth.length != 6 || !check( birth_val, user_birth ) ) {
			$( "#birth_chk" ).text( "생년월일이 형식에 맞지않습니다." );
			$( "#birth_chk" ).css( "margin-left", "155px" );
			$( "#birth_chk" ).css( "color", "red" );
			$( '#user_birth' ).val( "" );
			$( "#submit1" ).attr( "disabled", true );
		} else {
			$( "#birth_chk" ).text( "" );
			$( "#submit1" ).attr( "disabled", false );
		}
	})
	
	//이메일 유효성검사
	$( "#user_mail" ).blur( function() {
		var user_mail = $( "#user_mail" ).val();
		
		if( !check( mail_val, user_mail ) ) {
			$( "#mail_chk" ).text( "메일이 형식에 맞지않습니다." );
			$( "#mail_chk" ).css( "margin-left", "155px" );
			$( "#mail_chk" ).css( "color", "red" );
			$( '#user_mail' ).val( "" );
			$( "#submit1" ).attr( "disabled", true );
		} else {
			$( "#mail_chk" ).text( "" );
			$( "#submit1" ).attr( "disabled", false );
		}
	})
	
	//전화번호 유효성검사
	$( '#user_phone' ).blur( function() {
		var user_phone = $( '#user_phone' ).val();
		
		if( !check( phone_val, user_phone ) ) {
			$( "#phone_chk" ).text( "휴대폰번호가 형식에 맞지않습니다." );
			$( "#phone_chk" ).css( "margin-left", "155px" );
			$( "#phone_chk" ).css( "color", "red" );
			$( '#user_phone' ).val( "" );
			$( "#submit1" ).attr( "disabled", true );
		} else {
			$( "#phone_chk" ).text( "" );
			$( "#submit1" ).attr( "disabled", false );
		}
	})
	
	document.getElementById('submit1').onclick = function() {
		let id = document.sfrm.id.value.trim()
		let pwd = document.sfrm.pwd.value.trim()
		let mail = document.sfrm.mail.value.trim()
		let birth = document.sfrm.birth.value.trim()
		let phone = document.sfrm.phone.value.trim()
		
		if( id == '' ) {
			alert( 'ID를 입력하셔야 합니다.' )
			document.sfrm.id.focus()
			return false;
		} 
		if( pwd == '' ) {
			alert( '비밀번호를 입력하셔야 합니다.')
			return false;
		}
		if( document.sfrm.name.value.trim() == '' ) {
			alert( '이름을 입력하셔야 합니다.')
			return false;
		}
		if( birth == '' ) {
			alert( '생년월일을 입력하셔야 합니다.')
			return false;
		}
		if( mail == '' ) {
			alert( '이메일을 입력하셔야 합니다.')
			return false;
		}
		if( phone == '' ) {
			alert( '핸드폰 번호를 입력하셔야 합니다.')
			return false;
		}
		if( document.sfrm.nick.value.trim() == '' ) {
			alert( '닉네임을 입력하셔야 합니다.')
			return false;
		}
		if(document.sfrm.info.checked == false) {
			alert('동의를 하셔야 합니다.');
			return false;
		}
		//파일형식 검사(사진파일만 가능)
		if ( document.sfrm.profile.value.trim() != '' ) {
			var fileValue = document.sfrm.profile.value.trim().split('\\');
			var filename = fileValue[fileValue.length-1];
			var fileEname = filename.substring(filename.length-4, filename.length);
			if ( fileEname == '.jpg' || fileEname == '.png' || fileEname == '.gif' || fileEname == '.GIF' || fileEname == '.PNG' || fileEname == '.JPG' ) {} 
			else {
				alert( '사진파일만 첨부해주세요.(jpg, png, gif)' );
				document.sfrm.profile.value = '';
				return false;
			}
		}
		document.sfrm.submit();
	};
	
	//개인정보방침보이는 modal창 설정
	$( '#dialog' ).dialog({
		width: 700,
		height: 500,
		autoOpen: false,
		modal: true,
		resizable: false,
		buttons: {
			'확인': function() {
				$( this ).dialog( 'close' );
			}
		},
		show: {
			effect: 'blind',
			duration: 1000
		},
		hide: {
			effect: 'blind',
			duration: 1000
		}
	})
};

//개인정보방침 modal창 띄우기
function agree() {
	$( '#dialog' ).dialog( 'open' );
}


</script>
</head>

<body id="page-top">

    <!-- Page Wrapper -->
    <div id="wrapper">

        <!-- Sidebar -->
        <ul class="navbar-nav bg-gradient-primary sidebar sidebar-dark accordion" id="accordionSidebar">

            <!-- Sidebar - Brand -->
            <a class="sidebar-brand d-flex align-items-center justify-content-center" href="/">
                <!-- <div class="sidebar-brand-icon rotate-n-15">
                    <i class="fas fa-laugh-wink"></i>
                </div> -->
                <div class="sidebar-brand-text mx-3">Vono</div>
            </a>

            <!-- Divider -->
            <hr class="sidebar-divider my-0">

            <!-- Nav Item - Dashboard -->
            <li class="nav-item active">
                <a class="nav-link" href="index.html">
                    <i class="fa fa-plus"></i>
                    <span>새 회의록 생성</span></a>
            </li>

            <!-- Divider -->
            <hr class="sidebar-divider">

            <!-- Heading -->
            <div class="sidebar-heading">
                회의록
            </div>

            <!-- Nav Item - Pages Collapse Menu -->
            <li class="nav-item">
                <a class="nav-link collapsed" href="#" data-toggle="collapse" data-target="#collapseTwo"
                    aria-expanded="true" aria-controls="collapseTwo">
                    <i class="fas fa-fw fa-folder"></i>
                    <span>내 회의록</span>
                </a>
                <div id="collapseTwo" class="collapse" aria-labelledby="headingTwo" data-parent="#accordionSidebar">
                    <div class="bg-white py-2 collapse-inner rounded">
                        <a class="collapse-item" href="buttons.html">폴더 생성</a>
                        <a class="collapse-item" href="card.html">목록 이동</a>
                    </div>
                </div>
            </li>

            <!-- Divider -->
            <hr class="sidebar-divider">

            <!-- Heading -->
            <div class="sidebar-heading">
                삭제
            </div>

            <!-- Nav Item - Charts -->
            <li class="nav-item">
                <a class="nav-link" href="wasteBasket">
                    <i class="fas fa-fw fa-trash-alt"></i>
                    <span>휴지통</span></a>
            </li>

            <!-- Divider -->
            <hr class="sidebar-divider d-none d-md-block">

            <!-- Sidebar Toggler (Sidebar) -->
            <div class="text-center d-none d-md-inline">
                <button class="rounded-circle border-0" id="sidebarToggle"></button>
            </div>

        </ul>
        <!-- End of Sidebar -->

        <!-- Content Wrapper -->
                <!-- Begin Page Content -->
                <!-- 여기서부터 content 작성 시작 -->
                <div class="container-fluid">
                	<div class="signup-form">
					    <form action="/signUp" method="post" name="meberJoinForm" class="form-horizontal" enctype="multipart/form-data">
					      	<div class="row">
					        	<div class="col-8 signuptitle">
									<h2>회원가입</h2>
								</div>	
					      	</div>			
					        <div class="form-group row">
								<label class="col-form-label col-4">아이디</label>
								<div class="col-8">
					                <input type="text" class="form-control" id="user_id" name="login_id" placeholder="4~12, 영어대소문자, 숫자가능" required="required">
					            </div>            
					            <div id="usingId_chk"></div>
					        </div>
					
							<div class="form-group row">
								<label class="col-form-label col-4">비밀번호</label>
								<div class="col-8">
					                <input type="password" class="form-control" id="user_pwd" name="pw" placeholder="4~12, 영어대소문자, 숫자가능" required="required">
					            </div>   	
					            <div id="pwd_chk"></div>
					        </div>
							<div class="form-group row">
								<label class="col-form-label col-4">비밀번호 확인</label>
								<div class="col-8">
					                <input type="password" class="form-control" id="user_cpwd" name="confirm_pwd">
					            </div>        	
					            <div id="cpwd_chk"></div>
					        </div>
					        
					        <div class="form-group row">
								<label class="col-form-label col-4">이름</label>
								<div class="col-8">
					                <input type="text" class="form-control" name="name" >
					            </div>        	
					        </div>
					        
					        <div class="form-group row">
								<label class="col-form-label col-4">이메일</label>
								<div class="col-8">
					                <input type="email" class="form-control" id="user_mail" name="email" placeholder="vono@vono.com" >
					            </div>        	 
					            <div id="mail_chk"></div>
					        </div>
					        <div class="form-group row">
								<label class="col-form-label col-4">전화번호</label>
								<div class="col-8">
					                <input type="tel" class="form-control" id="user_phone" name="phone" placeholder="010-1234-5678" >
					            </div>   
					            <div id="phone_chk"></div>     	
					        </div>
					        <div class="form-group row">
								<label class="col-form-label col-4">직장</label>
								<div class="col-8">
					                <input type="job" class="form-control" id="user_job" name="job" placeholder="vono co." >
					            </div>   
					            <div id="phone_chk"></div>     	
					        </div>
							
							<div class="form-group row">
								<div class="col-8 offset-4">
									<p><label class="form-check-label"><input type="checkbox" name="info" required="required"><a id="agree" href="javascript:agree();">개인정보취급방침</a>에 동의하십니까?</label></p>
									<button type="submit" id="submit1" class="btn btn-primary btn-lg">회원가입</button>
								</div>  
								
								<!-- 개인정보방침 modal창 내용 -->  
								<div id="dialog" title="개인정보취급방침">
									<p>
									1. 수집 개인정보 항목 : 회사명, 담당자명, 메일 주소, 전화번호, 홈페이지 주소, 팩스번호, 주소 <br />
									2. 개인정보의 수집 및 이용목적 : 제휴신청에 따른 본인확인 및 원활한 의사소통 경로 확보 <br />
									3. 개인정보의 이용기간 : 모든 검토가 완료된 후 3개월간 이용자의 조회를 위하여 보관하며, 이후 해당정보를 지체 없이 파기합니다. <br />
									4. 그 밖의 사항은 개인정보취급방침을 준수합니다.
									</p>
								</div>
							</div>	      
					    </form>
						<div class="text-center">이미 회원이십니까? <a href="/">로그인 하러 가기</a></div>
					</div>
                </div>
    	</div>
    
    <!-- End of Page Wrapper -->

    <!-- Scroll to Top Button-->
    <a class="scroll-to-top rounded" href="#page-top">
        <i class="fas fa-angle-up"></i>
    </a>

    <!-- Logout Modal-->
    <div class="modal fade" id="logoutModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel"
        aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="exampleModalLabel">Ready to Leave?</h5>
                    <button class="close" type="button" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">×</span>
                    </button>
                </div>
                <div class="modal-body">Select "Logout" below if you are ready to end your current session.</div>
                <div class="modal-footer">
                    <button class="btn btn-secondary" type="button" data-dismiss="modal">Cancel</button>
                    <a class="btn btn-primary" href="login.html">Logout</a>
                </div>
            </div>
        </div>
    </div>

    <!-- Bootstrap core JavaScript-->
    <script src="vendor/jquery/jquery.min.js"></script>
    <script src="vendor/bootstrap/js/bootstrap.bundle.min.js"></script>

    <!-- Core plugin JavaScript-->
    <script src="vendor/jquery-easing/jquery.easing.min.js"></script>

    <!-- Custom scripts for all pages-->
    <script src="js/sb-admin-2.min.js"></script>

</body>

</html>